/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("cus.crm.mytasks.util.PriorityListUtil");jQuery.sap.require("cus.crm.mytasks.util.Util");cus.crm.mytasks.util.PriorityListUtil={getHighestPrio:function(){var c=cus.crm.mytasks.util.Util,C=c.getCustomizingModel();var h=C.getProperty("/highestPrio");return h},getDefaultPrio:function(){var c=cus.crm.mytasks.util.Util,C=c.getCustomizingModel();var d=C.getProperty("/defaultPrio");return d},parsePrioListOData:function(d){var e={};if(d){if(Array.isArray(d.results))e=jQuery.extend({},d.results[0],true);else d.results=[]}else{d={};d.results=[]}e.Priority="0";e.TxtLong="";e.IsDefault=false;d.results.splice(0,0,e);var c={priolist:[]};jQuery.extend(c.priolist,d.results,true);var C=cus.crm.mytasks.util.Util,o=C.getCustomizingModel();o.setData(c,true);this.setDefaultPrio(o);this.setHighestPrio(o)},setDefaultPrio:function(c){var p=c.getProperty("/priolist");var d=this.parseDefaultPrio(p);c.setProperty("/defaultPrio",d)},parseDefaultPrio:function(p){var d=p[0].Priority;for(var i=0;i<p.length;i++){var a=p[i];if(a.IsDefault===true||a.IsDefault==="true"){d=a.Priority;break}}return d},setHighestPrio:function(c){var p=c.getProperty("/priolist");var d=this.parseHighestPrio(p);c.setProperty("/highestPrio",d)},parseHighestPrio:function(p){var h=undefined;for(var i=1;i<p.length;i++){var a=p[i];if(!h||h>a.Priority){h=a.Priority}}return h},read:function(v){var c=cus.crm.mytasks.util.Util,C=c.getCustomizingModel();if(C.getProperty("/priolist")===undefined){jQuery.sap.log.debug("Reading prio cust from BE");var e=function(E){cus.crm.mytasks.util.Util.onRequestFailed(E,"Operation failed: Read priority customizing. ")};var s=function(d){var c=cus.crm.mytasks.util.Util;c.logObjectToConsole("Operation successfull: Read priority customizing. ",d);this.parsePrioListOData(d)};v.getModel().callFunction("retrieveTaskPrioCustomizing","GET",{},null,jQuery.proxy(s,this),e)}c.bindCustomizingModel(v)},};
