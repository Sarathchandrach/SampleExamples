/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("sap.ca.ui.model.format.NumberFormat");sap.ca.scfld.md.controller.BaseDetailController.extend("hcm.emp.payslip.view.S3",{extHookChangeFooterButtons:null,onInit:function(){sap.ca.scfld.md.controller.BaseDetailController.prototype.onInit.call(this);this.resourceBundle=this.oApplicationFacade.getResourceBundle();this.oRouter.attachRouteMatched(this.handleRouteMatched,this);this.jsonModel=new sap.ui.model.json.JSONModel();this.getView().setModel(this.jsonModel,"NewModel")},handleRouteMatched:function(e){var v=this.getView();var i=null;if(e.getParameter("name")==="detail"){var c=new sap.ui.model.Context(v.getModel(),'/'+e.getParameter("arguments").contextPath);v.setBindingContext(c);var p=this.getPdfUrl(c);i={};i.EndDate=p.EndDate;i.SEQUENCENUMBER=p.SEQUENCENUMBER;i.PDFPayslipUrl=p.PDFPayslipUrl;this.jsonModel.setData(i);this.oApplicationImplementation.defineDetailHeaderFooter(this)}},getPdfUrl:function(b){var p={};if(b.getProperty("")){p.PDFPayslipUrl=b.getProperty("").__metadata.uri.replace("Payslips","PDFPayslips")+"/$value";p.SEQUENCENUMBER=b.getProperty("").SEQUENCENUMBER;p.EndDate=b.getProperty("").EndDate}else p.PDFPayslipUrl=(b.getModel().sServiceUrl+b.sPath).replace("Payslips","PDFPayslips")+"/$value";p.PDFPayslipUrl=p.PDFPayslipUrl.replace("'","&#39;");p.PDFPayslipUrl=p.PDFPayslipUrl.replace("'","&#39;");if(jQuery.sap.getUriParameters().get("local")){var a=window.location.href.indexOf("index.html");var c=null;if(a>-1){c=window.location.href.substring(0,a)}else{var o=window.location.protocol+"//"+window.location.hostname+(window.location.port?':'+window.location.port:'');c=o+window.location.pathname}var e=p.PDFPayslipUrl.indexOf("http://")>-1?p.PDFPayslipUrl.replace("http://","proxy/http/"):p.PDFPayslipUrl.replace("https://","proxy/https/");p.PDFPayslipUrl=c+e}return p},stringFormatter:function(){var s="";for(var i=0;i<arguments.length;i++){s=s+" "+arguments[i]}return s},numberFormat:function(n){try{if(!isNaN(parseFloat(n))&&isFinite(n)){var a=sap.ca.ui.model.format.NumberFormat.getInstance();return a.format(n)}}catch(e){jQuery.sap.log.warning(n+" couldn't be formatted to Number","numberFormat in S3 Controller","Payslip")}return n},numberFormatter:function(){if(arguments.length>1)arguments[1]=this.numberFormat(arguments[1]);var s="";for(var i=0;i<arguments.length;i++){s=s+" "+arguments[i]}return s},getHeaderFooterOptions:function(){var t=this;var o={oAddBookmarkSettings:{title:t.resourceBundle.getText("DISPLAY_NAME_DETAILS"),icon:"sap-icon://travel-expense-report"},};if(this.extHookChangeFooterButtons){o=this.extHookChangeFooterButtons(o)};return o},});
