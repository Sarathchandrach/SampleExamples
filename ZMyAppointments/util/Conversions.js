/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("cus.crm.mycalendar.util.Util");jQuery.sap.require("sap.ui.core.format.NumberFormat");jQuery.sap.declare("cus.crm.mycalendar.util.Conversions");cus.crm.mycalendar.util.Conversions={formatDateTime:function(d){if(d!==null){if(typeof d==="string"){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d)}var a=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"short"});return a.format(d)}else{return}},formatDateTimeAllDay:function(d,a){if(d!==null&&a!==null){if(typeof d==="string"){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d)}var b=sap.ui.core.format.DateFormat.getDateInstance({style:"short"});var D=b.format(d);if(a){var c=cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.alldayevent");return D+" "+c}else{var t=sap.ui.core.format.DateFormat.getTimeInstance({style:"short"});var T=t.format(d);return D+" "+T}}},formatDate:function(d){var D="";if(d){if(typeof d==="string"){if(d.substring(0,6)==="/Date("){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d)}else{d=new Date(d)}}if(typeof d==="object"){var a=sap.ui.core.format.DateFormat.getDateInstance({style:"long"});D=a.format(d)}}return D},formatDateDay:function(d){var D="";if(d){if(typeof d==="string"){if(d.substring(0,6)==="/Date("){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d)}else{d=new Date(d)}}if(typeof d==="object"){var a=sap.ui.core.format.DateFormat.getDateInstance({style:"full"});D=a.format(d)}}return D},formatTime:function(d,a){if(a){return cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.alldayevent")}else if(d){if(typeof d==="string"){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d)}var l=new sap.ui.core.LocaleData(sap.ui.getCore().getConfiguration().getLocale());var p=l.getTimePattern("short");var f=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:p});var t=f.format(d);return t}},formatAccountContact:function(l,a,b,c,i){var r="";if(i){var d=this.getBindingContext().getObject();if(d){var p=this.getBindingContext().getObject().PrivatFlag;if(p){return""}}else return}if(l!==""){if(a!==""){if(c!=="")r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetails",[l,a,c]);else r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutContact",[l,a])}else{if(c!=="")r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetails",[l,b,c]);else r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutContact",[l,b])}}else{if(a!==""){if(c!=="")r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutLoc",[a,c]);else r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutContactAndLoc",[a])}else{if(c!=="")r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutLoc",[b,c]);else r=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.furtherDetailsWithoutContactAndLoc",[b])}}return r},formatDuration:function(f,t){if(f!==null&&t!==null&&f!==undefined&&t!==undefined){var d;var a;if(typeof f==="string"){f=cus.crm.mycalendar.util.Conversions.getDatefromString(f)}if(typeof t==="string"){t=cus.crm.mycalendar.util.Conversions.getDatefromString(t)}a=t.getTime()-f.getTime();d=Math.round(a/60000);if(d<60){var n=d.toString();var m=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.duration.min",n);return m}else{if(d<1440){var b=Math.round(d/30);var c=b/2;var e=sap.ui.core.format.NumberFormat.getFloatInstance();var g=e.format(c);n=g.toString();var h=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.duration.hour",n);return h}else{var i=Math.ceil(d/1440);n=i.toString();if(i=="1"){var j=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.duration.day",n)}else{var j=cus.crm.mycalendar.util.Util.geti18NText1("view.Appointment.duration.days",n)}return j}}}},getDatefromString:function(d){d=d.replace("/Date(","").replace(")/","");d=parseInt(d);d=new Date(d);return d},formatStatusText:function(s){switch(s){case'E0001':return sap.ui.core.ValueState.Neutral;case'E0002':return sap.ui.core.ValueState.Neutral;case'E0003':return sap.ui.core.ValueState.Success;case'E0007':return sap.ui.core.ValueState.Error;default:return sap.ui.core.ValueState.None}},formatPrivateIcon:function(p){if(p!==null){if(p){return"sap-icon://private"}else{return"sap-icon://unlocked"}}},formatPrivateDescription:function(p){if(p!==null){if(p){return cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.private")}else{return""}}},formatContactTxt:function(c){if(c){var C=cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.contact")+":\u00A0";return C+c}else{return""}},formatResponsibleTxt:function(r){if(r){var R=cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.employeeResponsible")+":\u00A0";return R+r}else{return""}},formatPhotoUrl:function(m){return m?m:"sap-icon://person-placeholder"},getRelativePathFromURL:function(a){var u=document.createElement('a');u.href=a;if(u.pathname.substring(0,1)=="/")return u.pathname;else return"/"+u.pathname},urlConverter:function(v){var s=jQuery.sap.getUriParameters().get("sap-server");var a=jQuery.sap.getUriParameters().get("sap-host");var b=jQuery.sap.getUriParameters().get("sap-host-http");var c=jQuery.sap.getUriParameters().get("sap-client");var u;var U=URI(location.protocol+"//"+location.hostname+(location.port?':'+location.port:'')+cus.crm.mycalendar.util.Conversions.getRelativePathFromURL(v));var C=location.protocol.replace(':','');if(C!==U.protocol()){U.protocol(C)}if(s){U.addSearch('sap-server',s)}if(a){U.addSearch('sap-host',a)}if(b){U.addSearch('sap-host-http',b)}if(c){U.addSearch('sap-client',c)}u=U.toString();if(u==""){v=v.replace("https","http");return v}else{return U.toString()}},mimeTypeConverter:function(v){switch(v){case'application/vnd.openxmlformats-officedocument.presentationml.presentation':case'application/vnd.ms-powerpoint':return'pptx';break;case'application/msword':case'application/vnd.openxmlformats-officedocument.wordprocessingml.document':return'doc';break;case'application/vnd.ms-excel':case'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':return'xls';break;case'image/jpeg':case'image/png':case'image/tiff':case'image/gif':return'jpg';break;case'application/pdf':return'pdf';break;case'text/plain':return'txt';break;default:return'unknown'}},uploadUrlConverter:function(v){v="/sap/opu/odata/sap/CRM_APPOINTMENT_SRV"+v+"/AppointmentToAttachment";return v},formatAccountText:function(a,A){if(a!==""){return a}return A},formatTypeTxt:function(t){if(t!==""){var T=cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.TransactionType")+":\u00A0";return T+t}else{return""}},FormatDocHistory:function(v){if(v==="BUS2000111"||v==="BUS2000125"||v==="BUS2000126"||v==="BUS2000108"){return true}else{return false}},formatDescrType:function(d,t,i){if(i){var b=this.getBindingContext().getObject();if(b){var p=this.getBindingContext().getObject().PrivatFlag;if(p){var a=cus.crm.mycalendar.util.Util.geti18NText("view.Appointment.privateAppointment");return a}}else return}return d}};
