/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("cus.crm.opportunity.util.Util");cus.crm.opportunity.util.Util={refreshHeaderETag:function(p,c){var m=c.oModel;if(m.getContext("/"+p)){m.deleteCreatedEntry(m.getContext("/"+p))}m.createBindingContext("/"+p,null,function(C){var d=C.getObject();var o=c.getView().getModel("controllers");var s=o.getProperty("/s3Controller");if(s){s.bindS3Header(d)}},true)},show412ErrorDialog:function(c,o){sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('MSG_CONFLICTING_DATA')},o)},mPartnerDetermination:null,getPartnerFunctions:function(){return this.mPartnerDetermination},aggregatePartnerFunctions:function(f){if(this.mPartnerDetermination===null){this.mPartnerDetermination={}}for(var i=0;i<f.length;i++){if(!this.mPartnerDetermination[f[i].TransactionType]){this.mPartnerDetermination[f[i].TransactionType]=[]}this.mPartnerDetermination[f[i].TransactionType].push(f[i])}},fetchPartnerFunctions:function(m){m.read("PartnerFunctions",null,null,false,function(d,r){cus.crm.opportunity.util.Util.aggregatePartnerFunctions(d.results)},function(e){cus.crm.opportunity.util.Util.handleErrors(e)})},handleErrors:function(e){sap.ca.ui.utils.busydialog.releaseBusyDialog();jQuery.sap.log.error(JSON.stringify(e));sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:e.message,details:JSON.parse(e.response.body).error.message.value},function(r){})},};
